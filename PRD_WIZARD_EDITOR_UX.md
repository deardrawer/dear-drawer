# PRD: 청첩장 에디터 단계별 위자드 UX 개선

## 문서 정보
- **작성일**: 2026-01-31
- **버전**: v2.0
- **작성자**: Product Manager (Claude Code)
- **관련 파일**:
  - `src/app/editor/page.tsx`
  - `src/components/editor/EditPanel.tsx`
  - `src/store/editorStore.ts`

---

## 1. 개요 (Overview)

### 1.1 제품 비전
사용자가 직관적이고 명확한 프로세스를 통해 **청첩장을 단계별로 완성**할 수 있는 가이드형 에디터 경험을 제공합니다. 실제 청첩장의 페이지 구조(표지 → 본문 → 햄버거 메뉴)를 반영한 **선형적 위자드 플로우**로 전환하여 사용자 이탈률을 낮추고 청첩장 완성률을 높입니다.

### 1.2 핵심 원칙
1. **실제 청첩장 구조 반영**: 표지/본문/햄버거 메뉴가 별도 화면인 점을 편집 단계에도 반영
2. **실시간 미리보기**: 왼쪽에 미리보기, 오른쪽에 편집 패널 (데스크탑)
3. **샘플 데이터 프리필**: 빈 필드보다 예시가 있으면 사용자가 무엇을 써야 할지 이해하기 쉬움
4. **AI 지원 범위 확장**: 인비테이션 데이터, 커플소개, 스토리, 인터뷰까지 AI가 초안 작성

### 1.3 목표 및 성공 지표

**핵심 목표**
- 사용자가 에디터에서 "어디서 뭘 해야 하는지" 명확히 인지
- 필수 정보부터 선택 정보까지 순차적으로 입력하도록 유도
- 청첩장 완성까지의 진행 상태를 시각적으로 제공

**성공 지표 (KPI)**
| 지표 | 현재 (예상) | 목표 | 측정 방법 |
|------|-------------|------|-----------|
| 청첩장 완성률 | 35% | 65% | (저장된 초대장 / 에디터 진입자) × 100 |
| 커스텀 URL 설정률 | N/A | 90% | 발행된 청첩장 중 커스텀 URL 비율 |
| 단계별 이탈률 | N/A | Step 1: <15%, Step 2-5: <10% | 각 단계 완료율 추적 |
| AI 스토리 생성 사용률 | N/A | 70% | Step 4에서 AI 사용 비율 |

---

## 2. 문제 정의 (Problem Statement)

### 2.1 현재 상태 (As-Is)

**현재 에디터 구조**
```
EditPanel (Tabs)
├─ 디자인 (Design) - 8개 아코디언
├─ 필수입력 (Required) - 5개 아코디언
├─ 스토리 (Story) - 3개 아코디언
└─ 추가기능 (Extras) - 5개 아코디언
```

**주요 문제점**
1. **인지 과부하**: 4개 탭에 21개 항목이 한 번에 노출
2. **청첩장 구조와 불일치**: 실제 청첩장의 페이지 구분이 편집 UI에 반영 안 됨
3. **빈 필드 막막함**: 무엇을 써야 할지 예시 없이 빈 입력창만 제공
4. **AI 활용 제한**: 스토리만 AI 생성, 다른 텍스트는 직접 작성 필요

### 2.2 목표 상태 (To-Be)

**위자드 플로우 구조 (v2.0)**
```
Step 1: 템플릿 선택
  └─ 템플릿 선택 (OUR / FAMILY)
  └─ 템플릿 미리보기

Step 2: 기본 정보 (필수)
  └─ 신랑/신부 이름 ⚠ 필수 고유값 (비워둠)
  └─ 결혼 날짜/시간 ⚠ 필수 고유값 (비워둠)
  └─ 예식장 정보 ⚠ 필수 고유값 (비워둠)
  └─ 부모님 성함 ⚠ 필수 고유값 (비워둠)

Step 3: 인비테이션 페이지 (표지)
  └─ 📱 미리보기: 표지 화면
  └─ 인트로 스타일 선택
  └─ 커버 이미지 업로드
  └─ 표지 인사말 (샘플 프리필)
  └─ 카카오 공유 썸네일
  └─ 배경음악 (선택)

Step 4: 본문 콘텐츠
  └─ 📱 미리보기: 본문 스크롤 화면
  └─ [AI 초안 작성하기] 버튼
      ├─ 인비테이션 데이터 활용
      ├─ 커플 소개 생성
      ├─ 스토리 생성
      └─ 인터뷰 생성
  └─ 커플 소개 (샘플 프리필)
  └─ 러브스토리 (샘플 프리필)
  └─ 인터뷰 (샘플 프리필)
  └─ 갤러리 이미지 업로드
  └─ 안내사항 (교통, 주차, 식사 등 - 샘플 프리필)

Step 5: 햄버거 메뉴 설정
  └─ 📱 미리보기: 햄버거 메뉴 열린 상태
  └─ RSVP 설정 (활성화/마감일)
  └─ 계좌 정보 ⚠ 필수 고유값 (비워둠)
  └─ 연락처 ⚠ 필수 고유값 (비워둠)

Step 6: 발행 & 공유
  └─ 📱 미리보기: 전체 플로우
  └─ 커스텀 URL 설정 ⭐ 필수
      ├─ 자동생성 URL과 중복 체크
      ├─ 사용 가능 여부 실시간 표시
      └─ 슬러그 규칙 안내
  └─ 공개 설정
  └─ [발행하기] 버튼
  └─ 공유 옵션 (QR, 카카오톡, SMS)
```

---

## 3. 핵심 UX 설계

### 3.1 레이아웃: 왼쪽 미리보기 + 오른쪽 편집

**데스크탑 (>= 1024px)**
```
┌──────────────────┬─────────────────────────┐
│                  │  Step 4/6  본문 콘텐츠    │
│   📱 iPhone      │  ████████░░░░ 67%        │
│   미리보기       ├─────────────────────────┤
│                  │                         │
│  ┌─────────────┐ │  [AI 초안 작성하기]      │
│  │             │ │                         │
│  │   실시간    │ │  👤 커플 소개            │
│  │   미리보기  │ │  [신랑 소개 입력]        │
│  │             │ │  [신부 소개 입력]        │
│  │   본문      │ │                         │
│  │   스크롤    │ │  💕 러브스토리           │
│  │   영역      │ │  [스토리 입력]           │
│  │             │ │                         │
│  └─────────────┘ │  📸 갤러리               │
│                  │  [이미지 추가]           │
│                  │                         │
│                  │  [이전] [다음 단계]       │
└──────────────────┴─────────────────────────┘
     40%                    60%
```

**태블릿 (768px - 1023px)**
- 미리보기 상단 고정 (30% 높이)
- 편집 패널 하단 스크롤 (70% 높이)

**모바일 (< 768px)**
- 편집 패널 전체 화면
- 하단 플로팅 버튼 "미리보기" → 모달로 표시

### 3.2 샘플 데이터 프리필 전략

**필수 고유값 (비워둠)** - 사용자마다 반드시 다른 값
- 신랑/신부 이름
- 결혼 날짜/시간
- 예식장 이름/주소
- 부모님 성함
- 계좌 정보 (은행, 계좌번호, 예금주)
- 연락처 (전화번호)

**샘플 프리필 (참고용)** - 수정해서 사용할 수 있는 텍스트
| 필드 | 샘플 텍스트 (예시) |
|------|-------------------|
| 표지 인사말 | "두 사람이 한 길을 걸어갑니다.\n서로의 손을 잡고\n같은 곳을 바라보며" |
| 신랑 소개 | "따뜻한 마음으로 가족을 사랑하는 사람입니다.\n음악과 여행을 좋아하며..." |
| 신부 소개 | "밝은 미소로 주변을 환하게 만드는 사람입니다.\n요리와 그림 그리기를..." |
| 러브스토리 | "2020년 봄, 우연히 시작된 인연이\n4년의 시간을 함께하며..." |
| 교통 안내 | "지하철: 2호선 강남역 3번 출구에서 도보 5분\n버스: 146, 341번 강남역 하차" |
| 주차 안내 | "건물 지하 주차장 이용 가능 (2시간 무료)" |

**UI 처리**
- 샘플 텍스트는 연한 색상 (text-gray-400) 또는 이탤릭체로 표시
- 입력 필드 클릭 시 전체 선택되어 바로 수정 가능
- 상단에 "예시를 참고하여 수정해주세요" 안내 문구

### 3.3 미리보기 동기화

**각 Step별 미리보기 포커스**
| Step | 미리보기 화면 | 설명 |
|------|--------------|------|
| Step 1 | 템플릿 갤러리 | 선택한 템플릿 하이라이트 |
| Step 2 | 표지 + 기본정보 | 입력한 이름/날짜가 표지에 표시 |
| Step 3 | 표지 페이지 | 인트로 스타일, 커버 이미지 실시간 반영 |
| Step 4 | 본문 스크롤 | 커플소개, 스토리, 갤러리 영역 |
| Step 5 | 햄버거 메뉴 열린 상태 | RSVP, 계좌, 연락처 영역 |
| Step 6 | 전체 플로우 | 표지→본문→메뉴 자동 스크롤 |

---

## 4. Step별 상세 명세

### 4.1 Step 1: 템플릿 선택

**목표**: 원하는 템플릿 스타일 선택

**UI 구성**
```
┌─────────────────────────────────────┐
│  Step 1/6  템플릿 선택               │
│  ██░░░░░░░░░░░░░ 17%                │
├─────────────────────────────────────┤
│                                     │
│  🎨 청첩장 스타일을 선택해주세요      │
│                                     │
│  ┌─────────────┬─────────────┐      │
│  │             │             │      │
│  │   OUR       │   FAMILY    │      │
│  │   Template  │   Template  │      │
│  │             │             │      │
│  │  [선택됨]   │   [선택]    │      │
│  └─────────────┴─────────────┘      │
│                                     │
│  선택한 템플릿:                      │
│  "OUR - 우리만의 이야기"             │
│                                     │
│           [다음 단계]                │
└─────────────────────────────────────┘
```

**인터랙션**
- 갤러리에서 템플릿 선택 후 진입 시, 해당 템플릿이 기본 선택됨
- 템플릿 변경 가능 (AI 질문 세트가 달라짐 안내)

### 4.2 Step 2: 기본 정보

**목표**: 청첩장의 핵심 필수 정보 수집

**포함 필드 (모두 필수, 비워둠)**
| 필드명 | 타입 | 검증 규칙 | 프리필 |
|--------|------|-----------|--------|
| 신랑 이름 | 텍스트 | 2-20자 | ❌ 비움 |
| 신부 이름 | 텍스트 | 2-20자 | ❌ 비움 |
| 결혼 날짜 | 날짜 | 오늘 이후 | ❌ 비움 |
| 결혼 시간 | 시간 | HH:MM | ❌ 비움 |
| 예식장 이름 | 텍스트 | 2-50자 | ❌ 비움 |
| 예식장 주소 | 텍스트 | 지번/도로명 | ❌ 비움 |
| 신랑 아버지 성함 | 텍스트 | 2-20자 | ❌ 비움 |
| 신랑 어머니 성함 | 텍스트 | 2-20자 | ❌ 비움 |
| 신부 아버지 성함 | 텍스트 | 2-20자 | ❌ 비움 |
| 신부 어머니 성함 | 텍스트 | 2-20자 | ❌ 비움 |

**UI 레이아웃**
```
┌──────────────────┬─────────────────────────┐
│                  │  Step 2/6  기본 정보     │
│   📱 미리보기    │  ████░░░░░░░░░ 33%       │
│                  ├─────────────────────────┤
│  ┌─────────────┐ │                         │
│  │  2026.03.21 │ │  👫 신랑신부 정보        │
│  │             │ │  ┌─────────┬─────────┐  │
│  │   신랑      │ │  │ 신랑 이름│ 신부 이름│  │
│  │   💍        │ │  │ [      ] │ [      ] │  │
│  │   신부      │ │  └─────────┴─────────┘  │
│  │             │ │                         │
│  │  그랜드홀   │ │  📅 예식 일시            │
│  └─────────────┘ │  [날짜 선택] [시간 선택]  │
│                  │                         │
│                  │  🏛️ 예식장 정보          │
│                  │  [예식장 이름]           │
│                  │  [주소 검색]             │
│                  │                         │
│                  │  👨‍👩‍👧‍👦 부모님 성함          │
│                  │  신랑측: [아버지] [어머니]│
│                  │  신부측: [아버지] [어머니]│
│                  │                         │
│                  │  [이전] [다음 단계]       │
└──────────────────┴─────────────────────────┘
```

### 4.3 Step 3: 인비테이션 페이지 (표지)

**목표**: 청첩장 표지 화면 디자인

**포함 필드**
| 필드명 | 필수 | 프리필 |
|--------|------|--------|
| 인트로 스타일 | ✅ | 기본값: cinematic |
| 커버 이미지 | ⚪ | ❌ 비움 |
| 표지 인사말 | ⚪ | ✅ 샘플 |
| 카카오 공유 썸네일 | ✅ | ❌ 비움 |
| 배경음악 | ⚪ | 기본 프리셋 |

**미리보기**: 표지 화면 (클릭해서 본문으로 넘어가기 전 상태)

```
┌──────────────────┬─────────────────────────┐
│                  │  Step 3/6  표지 꾸미기   │
│   📱 미리보기    │  ██████░░░░░░ 50%        │
│   [표지 화면]    ├─────────────────────────┤
│                  │                         │
│  ┌─────────────┐ │  🎨 인트로 스타일        │
│  │ ✨ 인트로   │ │  [프리셋 선택 갤러리]    │
│  │ 애니메이션  │ │                         │
│  │             │ │  📸 커버 이미지          │
│  │   신랑      │ │  [이미지 업로드]         │
│  │   💕        │ │                         │
│  │   신부      │ │  💬 표지 인사말          │
│  │             │ │  ┌─────────────────┐    │
│  │  터치하여   │ │  │ 두 사람이 한 길을│    │
│  │  시작하기   │ │  │ 걸어갑니다...   │    │
│  └─────────────┘ │  └─────────────────┘    │
│                  │  ⚠ 예시를 수정해주세요   │
│                  │                         │
│                  │  📲 카카오 공유 썸네일   │
│                  │  [썸네일 업로드] ⚠ 필수  │
│                  │                         │
│                  │  🎵 배경음악 (선택)      │
│                  │  [프리셋 선택]           │
│                  │                         │
│                  │  [이전] [다음 단계]       │
└──────────────────┴─────────────────────────┘
```

### 4.4 Step 4: 본문 콘텐츠

**목표**: 본문 페이지의 텍스트, 갤러리, 안내사항 작성

**AI 초안 작성 기능**
- 버튼 클릭 시 AI 스토리 생성기 모달 표시
- AI가 생성하는 콘텐츠:
  - 인비테이션 인사말 (Step 3의 표지 인사말과 연계)
  - 커플 소개 (신랑/신부 각각)
  - 러브스토리 (만남~결혼 결심까지)
  - 인터뷰 형식 콘텐츠

**포함 필드**
| 필드명 | 필수 | 프리필 |
|--------|------|--------|
| 커플 소개 - 신랑 | ⚪ | ✅ 샘플 |
| 커플 소개 - 신부 | ⚪ | ✅ 샘플 |
| 러브스토리 | ⚪ | ✅ 샘플 |
| 인터뷰 | ⚪ | ✅ 샘플 |
| 갤러리 이미지 | ⚪ | ❌ 비움 |
| 안내사항 - 교통 | ⚪ | ✅ 샘플 |
| 안내사항 - 주차 | ⚪ | ✅ 샘플 |
| 안내사항 - 식사 | ⚪ | ✅ 샘플 |

**미리보기**: 본문 스크롤 화면

```
┌──────────────────┬─────────────────────────┐
│                  │  Step 4/6  본문 콘텐츠   │
│   📱 미리보기    │  ████████░░░░ 67%        │
│   [본문 스크롤]  ├─────────────────────────┤
│                  │                         │
│  ┌─────────────┐ │  ┌───────────────────┐  │
│  │ 커플 소개   │ │  │ ✨ AI 초안 작성하기 │  │
│  │             │ │  │ 10가지 질문에 답하면│  │
│  │ 신랑 소개   │ │  │ 맞춤 콘텐츠 생성!  │  │
│  │ 신부 소개   │ │  └───────────────────┘  │
│  │             │ │                         │
│  │ ───────    │ │  👤 커플 소개            │
│  │             │ │  [신랑] 따뜻한 마음으로..│
│  │ 러브스토리  │ │  [신부] 밝은 미소로...   │
│  │             │ │  ⚠ 예시를 수정해주세요   │
│  │ ───────    │ │                         │
│  │             │ │  💕 러브스토리           │
│  │ 갤러리      │ │  [2020년 봄, 우연히...]  │
│  │ □ □ □      │ │                         │
│  │             │ │  🎤 인터뷰               │
│  │ ───────    │ │  [첫 만남의 기억은?...]  │
│  │             │ │                         │
│  │ 오시는 길   │ │  📸 갤러리               │
│  │ 🗺️ 지도    │ │  [+ 이미지 추가]         │
│  │             │ │                         │
│  │ 안내사항    │ │  ℹ️ 안내사항             │
│  │ 교통/주차   │ │  [교통] 지하철 2호선...  │
│  └─────────────┘ │  [주차] 건물 지하 주차장..│
│                  │  [식사] 예식 후 식사...   │
│                  │                         │
│                  │  [이전] [다음 단계]       │
└──────────────────┴─────────────────────────┘
```

### 4.5 Step 5: 햄버거 메뉴 설정

**목표**: 햄버거 메뉴에 표시되는 실용 정보 입력

**미리보기**: 햄버거 메뉴가 열린 상태의 화면

**포함 필드**
| 필드명 | 필수 | 프리필 |
|--------|------|--------|
| RSVP 활성화 | ⚪ | ✅ 활성화 |
| RSVP 마감일 | ⚪ | 결혼식 7일 전 |
| 신랑 계좌 (은행/계좌번호/예금주) | ⚪ | ❌ 비움 |
| 신부 계좌 | ⚪ | ❌ 비움 |
| 신랑측 부모님 계좌 | ⚪ | ❌ 비움 |
| 신부측 부모님 계좌 | ⚪ | ❌ 비움 |
| 신랑 연락처 | ⚪ | ❌ 비움 |
| 신부 연락처 | ⚪ | ❌ 비움 |
| 신랑측 부모님 연락처 | ⚪ | ❌ 비움 |
| 신부측 부모님 연락처 | ⚪ | ❌ 비움 |

```
┌──────────────────┬─────────────────────────┐
│                  │  Step 5/6  메뉴 설정     │
│   📱 미리보기    │  ██████████░░ 83%        │
│   [햄버거 메뉴]  ├─────────────────────────┤
│                  │                         │
│  ┌─────────────┐ │  📝 RSVP 설정           │
│  │ ☰ 메뉴     │ │  ☑ RSVP 기능 활성화     │
│  │─────────────│ │  마감일: [2026-03-14]   │
│  │             │ │                         │
│  │ 💳 축의금   │ │  💳 계좌 정보            │
│  │   신랑측    │ │                         │
│  │   신부측    │ │  신랑측                  │
│  │             │ │  [은행] [계좌번호]       │
│  │ 📞 연락처  │ │  [예금주]                │
│  │   신랑측    │ │                         │
│  │   신부측    │ │  신부측                  │
│  │             │ │  [은행] [계좌번호]       │
│  │ ✅ 참석여부 │ │  [예금주]                │
│  │   응답하기  │ │                         │
│  │             │ │  ☐ 부모님 계좌 추가      │
│  └─────────────┘ │                         │
│                  │  📞 연락처               │
│                  │  신랑: [전화번호]        │
│                  │  신부: [전화번호]        │
│                  │  ☐ 부모님 연락처 추가    │
│                  │                         │
│                  │  [이전] [다음 단계]       │
└──────────────────┴─────────────────────────┘
```

### 4.6 Step 6: 발행 & 공유

**목표**: 커스텀 URL 설정 및 청첩장 공개

**커스텀 URL 설정 (필수)**
- 자동 생성된 URL과 충돌 방지를 위한 실시간 중복 체크
- URL 규칙:
  - 영문 소문자, 숫자, 하이픈(-) 허용
  - 3-50자
  - 예약어 금지 (admin, api, login 등)
  - 시스템 자동 생성 패턴 금지 (inv-xxxxx 형태)

**포함 필드**
| 필드명 | 필수 | 설명 |
|--------|------|------|
| 커스텀 URL (슬러그) | ✅ 필수 | deardrawer.com/i/[slug] |
| 공개 설정 | ✅ 필수 | 비공개/공개 |

```
┌──────────────────┬─────────────────────────┐
│                  │  Step 6/6  발행하기      │
│   📱 미리보기    │  ████████████████ 100%   │
│   [전체 플로우]  ├─────────────────────────┤
│                  │                         │
│  ┌─────────────┐ │  🎉 청첩장이 거의 완성!  │
│  │             │ │                         │
│  │  자동 스크롤 │ │  🔗 청첩장 주소 설정 ⭐  │
│  │  표지 →     │ │  ────────────────────   │
│  │  본문 →     │ │  deardrawer.com/i/       │
│  │  메뉴       │ │  ┌─────────────────────┐│
│  │             │ │  │ minjun-yuna-0321    ││
│  │             │ │  └─────────────────────┘│
│  │             │ │  ✅ 사용 가능한 주소입니다│
│  │             │ │                         │
│  │             │ │  💡 추천: 신랑신부이름-날짜│
│  │             │ │     예) minjun-yuna-0321 │
│  └─────────────┘ │                         │
│                  │  🌐 공개 설정            │
│                  │  ⚫ 비공개 (나만 보기)    │
│                  │  ⚪ 공개 (링크 공유 가능) │
│                  │                         │
│                  │  ┌───────────────────┐  │
│                  │  │   ✨ 발행하기      │  │
│                  │  └───────────────────┘  │
│                  │                         │
│                  │  [이전]                  │
└──────────────────┴─────────────────────────┘
```

**발행 후 공유 모달**
```
┌─────────────────────────────────────┐
│  🎊 청첩장이 발행되었습니다!          │
├─────────────────────────────────────┤
│                                     │
│  📋 청첩장 주소                      │
│  ┌─────────────────────────────┐   │
│  │ deardrawer.com/i/minjun-... │   │
│  │                    [복사]   │   │
│  └─────────────────────────────┘   │
│                                     │
│  📱 QR 코드                         │
│  ┌─────────┐                        │
│  │  QR     │  [다운로드]            │
│  │  CODE   │                        │
│  └─────────┘                        │
│                                     │
│  📤 공유하기                         │
│  ┌─────────┬─────────┬─────────┐   │
│  │ 카카오톡 │  SMS   │  링크   │   │
│  └─────────┴─────────┴─────────┘   │
│                                     │
│         [내 청첩장 목록으로]         │
└─────────────────────────────────────┘
```

---

## 5. 커스텀 URL 중복 방지 로직

### 5.1 URL 슬러그 규칙

**허용 패턴**
- 영문 소문자: a-z
- 숫자: 0-9
- 하이픈: - (시작/끝 불가, 연속 불가)
- 길이: 3-50자

**금지 패턴**
| 패턴 | 이유 | 예시 |
|------|------|------|
| 시스템 자동 생성 | 충돌 방지 | `inv-a1b2c3`, `auto-xxxxx` |
| 예약어 | 시스템 경로 | `admin`, `api`, `login`, `signup`, `gallery`, `editor` |
| 숫자만 | 가독성 | `12345`, `0321` |
| 특수문자 | URL 안정성 | `@#$%`, `한글` |

### 5.2 중복 체크 API

**엔드포인트**: `GET /api/invitations/check-slug?slug=xxx`

**응답 예시**
```json
// 사용 가능
{
  "available": true,
  "slug": "minjun-yuna-0321"
}

// 사용 불가 (중복)
{
  "available": false,
  "slug": "minjun-yuna",
  "reason": "already_taken",
  "suggestions": [
    "minjun-yuna-2026",
    "minjun-yuna-march",
    "minjun-yuna-wedding"
  ]
}

// 사용 불가 (예약어)
{
  "available": false,
  "slug": "admin",
  "reason": "reserved",
  "message": "예약된 주소입니다. 다른 주소를 입력해주세요."
}
```

### 5.3 UI 피드백

**실시간 검증**
- 입력 중: 디바운스 300ms 후 API 호출
- 검증 중: 입력 필드 우측에 로딩 스피너
- 성공: ✅ 초록색 체크마크 + "사용 가능한 주소입니다"
- 실패: ❌ 빨간색 X + 사유 + 대안 제안

**에러 메시지**
| 상황 | 메시지 |
|------|--------|
| 이미 사용 중 | "이미 사용 중인 주소입니다. 다른 주소를 입력해주세요." |
| 예약어 | "예약된 주소입니다." |
| 형식 오류 | "영문 소문자, 숫자, 하이픈(-)만 사용 가능합니다." |
| 너무 짧음 | "3자 이상 입력해주세요." |
| 너무 길음 | "50자 이내로 입력해주세요." |

---

## 6. AI 스토리 생성 확장

### 6.1 AI 생성 범위 (Step 4)

**기존**: 스토리 섹션만 생성
**확장**: 인비테이션 데이터 활용하여 다양한 콘텐츠 생성

| 생성 항목 | 입력 데이터 | 출력 |
|-----------|-------------|------|
| 인비테이션 인사말 | 질문 답변 + 날짜/장소 | 표지에 들어갈 인사말 |
| 신랑 소개 | 질문 답변 (성격, 취미, 직업) | 2-3문장 소개글 |
| 신부 소개 | 질문 답변 (성격, 취미, 직업) | 2-3문장 소개글 |
| 러브스토리 | 질문 답변 (만남, 에피소드, 프로포즈) | 3-5개 스토리 블록 |
| 인터뷰 | 질문 답변 | Q&A 형식 5-7개 |

### 6.2 AI 질문 세트 (템플릿별)

**OUR 템플릿 (10개 질문)**
1. 어디서 처음 만났나요?
2. 첫인상은 어땠나요?
3. 사귀게 된 계기는?
4. 가장 기억에 남는 데이트는?
5. 서로의 어떤 점이 좋았나요?
6. 함께한 시간 중 가장 행복했던 순간은?
7. 프로포즈는 어떻게 했나요?
8. 결혼을 결심한 이유는?
9. 신랑/신부를 한마디로 표현하면?
10. 결혼 후 가장 하고 싶은 것은?

**FAMILY 템플릿 (12개 질문)**
- OUR 질문 + 가족 관련 질문 2개 추가

### 6.3 재생성 기능

**섹션별 재생성**
- 각 섹션 우측에 "다시 생성" 버튼
- 해당 섹션만 재생성 (다른 섹션 유지)

**전체 재생성**
- AI 초안 작성하기 버튼 다시 클릭
- 경고: "기존 내용이 덮어씌워집니다. 계속하시겠습니까?"

---

## 7. 기술 요구사항

### 7.1 컴포넌트 구조

```
src/
├─ app/
│  └─ editor/
│     └─ page.tsx
├─ components/
│  └─ editor/
│     ├─ WizardEditor.tsx (위자드 컨테이너)
│     ├─ WizardProgress.tsx (진행률 바)
│     ├─ WizardNavigation.tsx (이전/다음 버튼)
│     ├─ WizardPreview.tsx (왼쪽 미리보기)
│     ├─ wizard/
│     │  ├─ Step1_Template.tsx
│     │  ├─ Step2_BasicInfo.tsx
│     │  ├─ Step3_Invitation.tsx
│     │  ├─ Step4_Content.tsx
│     │  ├─ Step5_MenuSettings.tsx
│     │  └─ Step6_Publish.tsx
│     └─ EditPanel.tsx (기존 - 자유 편집 모드)
└─ store/
   └─ editorStore.ts
```

### 7.2 상태 관리 확장

```typescript
interface EditorStore {
  // 기존 필드들...

  // 위자드 모드 관련
  wizardMode: boolean
  wizardStep: 1 | 2 | 3 | 4 | 5 | 6
  wizardCompleted: Record<number, boolean>

  // 미리보기 관련
  previewSection: 'cover' | 'content' | 'menu' | 'full'

  // 샘플 데이터
  sampleDataApplied: boolean

  // 액션
  setWizardStep: (step: number) => void
  validateStep: (step: number) => { valid: boolean; errors: string[] }
  applyAIContent: (content: AIGeneratedContent) => void
  checkSlugAvailability: (slug: string) => Promise<SlugCheckResult>
}
```

### 7.3 API 변경

**슬러그 체크 강화**
```typescript
// GET /api/invitations/check-slug
interface SlugCheckRequest {
  slug: string
}

interface SlugCheckResponse {
  available: boolean
  slug: string
  reason?: 'already_taken' | 'reserved' | 'invalid_format'
  message?: string
  suggestions?: string[]
}
```

**AI 콘텐츠 생성 확장**
```typescript
// POST /api/ai/generate-content
interface GenerateContentRequest {
  templateId: 'our' | 'family'
  answers: Record<string, string>
  invitationData: {
    groomName: string
    brideName: string
    weddingDate: string
    venue: string
  }
}

interface GenerateContentResponse {
  greeting: string
  groomIntro: string
  brideIntro: string
  stories: Story[]
  interviews: Interview[]
}
```

---

## 8. 구현 체크리스트

### Phase 1: MVP

**Week 1: 기본 구조**
- [ ] WizardEditor 컨테이너 구현
- [ ] WizardProgress 컴포넌트
- [ ] WizardNavigation 컴포넌트
- [ ] WizardPreview (왼쪽 미리보기)
- [ ] 레이아웃: 40% 미리보기 + 60% 편집

**Week 2: Step 1-3 구현**
- [ ] Step1_Template (템플릿 선택)
- [ ] Step2_BasicInfo (기본 정보 - 비워둠)
- [ ] Step3_Invitation (표지 - 샘플 프리필)
- [ ] 미리보기 동기화 (표지 화면)

**Week 3: Step 4-5 구현**
- [ ] Step4_Content (본문 - 샘플 프리필)
- [ ] AI 초안 작성하기 기능 확장
- [ ] Step5_MenuSettings (햄버거 메뉴)
- [ ] 미리보기 동기화 (본문, 메뉴)

**Week 4: Step 6 + QA**
- [ ] Step6_Publish (커스텀 URL 필수)
- [ ] 슬러그 중복 체크 강화
- [ ] 발행 후 공유 모달
- [ ] 전체 플로우 QA
- [ ] 모바일 반응형 확인

### Phase 2: 완성도 향상

- [ ] 모바일 UI 최적화
- [ ] Draft 자동 저장
- [ ] 위자드 ↔ 자유 편집 모드 전환
- [ ] 도움말 투어

---

## 9. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| v1.0 | 2026-01-31 | 초안 작성 |
| v2.0 | 2026-01-31 | 사용자 피드백 반영: Step 구조 재편, 커스텀 URL 필수화, 샘플 프리필 전략, AI 생성 범위 확장, 미리보기 레이아웃 변경 |
